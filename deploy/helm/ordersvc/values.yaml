replicaCount: 2

image:
  repository: ghcr.io/sridharn-code-sandbox/ordersvc
  pullPolicy: IfNotPresent
  tag: "dev"

nameOverride: ""
fullnameOverride: ""

ingress:
  enabled: false
  className: nginx
  host: ordersvc.local
  annotations:
    nginx.ingress.kubernetes.io/proxy-connect-timeout: "10"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "30"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "30"
  tls: []
  #  - secretName: ordersvc-tls
  #    hosts:
  #      - ordersvc.local

service:
  type: ClusterIP
  port: 8080

resources:
  limits:
    cpu: 250m
    memory: 128Mi
  requests:
    cpu: 100m
    memory: 64Mi

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 5
  targetCPUUtilizationPercentage: 70

livenessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10
  timeoutSeconds: 3
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /readyz
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10
  timeoutSeconds: 3
  failureThreshold: 3

config:
  appName: ordersvc
  appEnvironment: development
  logLevel: info
  httpPort: "8080"
  grpcPort: "9090"
  databaseHost: ordersvc-postgresql
  databasePort: "5432"
  databaseUser: postgres
  databaseName: ordersvc
  databaseSSLMode: disable
  redisHost: ordersvc-redis
  redisPort: "6379"
  redisDB: "0"
  kafkaBrokers: ordersvc-kafka:9092
  kafkaTopic: order-events
  kafkaGroupID: ordersvc

secrets:
  databasePassword: postgres
  redisPassword: ""

podDisruptionBudget:
  enabled: true
  maxUnavailable: 1

terminationGracePeriodSeconds: 35

# -- PostgreSQL StatefulSet (postgres:16-alpine, available locally)
postgresql:
  enabled: true
  image: postgres:16-alpine
  pullPolicy: IfNotPresent
  password: postgres
  database: ordersvc
  persistence:
    size: 1Gi
  resources:
    limits:
      cpu: 250m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

# -- Redis Deployment (redis:7-alpine, available locally)
redis:
  enabled: true
  image: redis:7-alpine
  pullPolicy: IfNotPresent
  persistence:
    size: 512Mi
  resources:
    limits:
      cpu: 250m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi

# -- Kafka StatefulSet (KRaft mode, single broker for dev)
kafka:
  enabled: true
  image: apache/kafka:3.7.0
  pullPolicy: IfNotPresent
  clusterId: MkU3OEVBNTcwNTJENDM2Qk
  persistence:
    size: 1Gi
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 256Mi

# -- Frontend (React order-ui served by nginx)
frontend:
  enabled: false
  image:
    repository: ghcr.io/sridharn-code-sandbox/order-ui
    pullPolicy: IfNotPresent
    tag: "dev"
  replicaCount: 1
  service:
    type: ClusterIP
    port: 80
  resources:
    limits:
      cpu: 100m
      memory: 64Mi
    requests:
      cpu: 50m
      memory: 32Mi
